# 1.3 Poetry

## What is Poetry?

[Poetry](https://python-poetry.org/) is a modern tool for Python package and dependency management that aims to simplify the specification, management, and packaging of project dependencies. It addresses the need for an integrated tool to handle project setup, dependency resolution, and package distribution, making it invaluable for Python developers.

## Why do I need a package manager?

In Python, distributing and installing software as packages is a common practice. These packages, often in Wheel or zip formats, bundle the source code with essential metadata. The Wheel format, preferred for its efficiency, is an evolution from the older Egg format, designed to facilitate easier package distribution. Manually managing these packages and their dependencies can quickly become impractical, highlighting the necessity for package managers. Tools like Poetry automate these tasks, enhancing productivity and ensuring consistent environments across development and deployment stages.

## Why should I use Poetry in my project?

Integrating Poetry into your project offers significant benefits, including:

- **Enhanced Environment Management**: Poetry simplifies the process of managing different environments for various projects, promoting consistent development practices.
- **Streamlined Package Building and Distribution**: It offers a cohesive workflow for building, distributing, and installing packages, reducing the complexity typically associated with these tasks.
- **Standardized Project Metadata**: Poetry utilizes a standardized format for defining project metadata, such as dependencies, authors, and versioning, within a `pyproject.toml` file, fostering clarity and consistency.

Compared to traditional tools and workflows involving pip, venv, and manual dependency resolution, Poetry provides a more integrated and user-friendly approach, consolidating numerous aspects of package and environment management into a single, streamlined process.

## How can I install Poetry on my system?

Installation methods for Poetry are designed to suit various user preferences and system configurations. The recommended approach is to use [pipx](https://python-poetry.org/docs/#installation), which installs Poetry in an isolated environment, preventing any potential conflicts with project-specific dependencies. Verifying the installation is as straightforward as running `poetry --version` in your terminal, which should display the installed version of Poetry.

## How can I use Poetry for my MLOps project?

Integrating Poetry into your MLOps project involves a few steps aimed at setting up and configuring your development environment:

- Start by creating a new project directory and navigating into it.
- Execute `poetry init` in your terminal, which launches an interactive session to help you define initial project settings, including package name, version, description, author, and dependencies. This process also results in the creation of a `pyproject.toml` file, central to configuring your Poetry-managed project.

The `pyproject.toml` file is crucial for defining your project's dependencies and settings, with additional configuration options detailed in Poetry's documentation.

## How can I make my Poetry project easier to manage?

For a smoother Poetry experience, it's beneficial to create a `poetry.toml` file in your project's root directory with specific configurations for virtual environments:

```toml
# https://python-poetry.org/docs/configuration/

[virtualenvs]
in-project = true
prefer-active-python = true
```

These settings enhance your workflow by ensuring that Poetry creates virtual environments within your project directory and prefers the active Python interpreter, aligning with best practices for environment management. Further information can be found in the [Poetry documentation on managing environments](https://python-poetry.org/docs/managing-environments/).

## How can I install dependencies for my project with Poetry?

Poetry distinguishes between production (`main`) and development (`dev`) dependencies to streamline dependency management. To add dependencies to your project, use:

```bash
# For main dependencies
$ poetry add pandas scikit-learn

# For development dependencies
$ poetry add -G dev ipykernel
```

These commands update the `pyproject.toml` file, ensuring your project's dependencies are correctly managed and version-controlled. The inclusion of the caret symbol (`^`) in dependency versions adheres to the Semantic Versioning Convention, facilitating compatibility and preventing unintended updates.

## Can I use Poetry to download Python dependencies from my own organization's code repository?

Yes, Poetry supports the addition of custom package repositories, including private or organizational ones. This feature allows you to use proprietary packages alongside those available on the public PyPI. Adding a custom repository and configuring authentication can be achieved with Poetry's configuration commands, ensuring secure and flexible dependency management.

For comprehensive guidance on Poetry's capabilities, including advanced configuration, package specification, and command usage, refer to the [official Poetry documentation](https://python-poetry.org/docs/). These resources provide detailed insights into maximizing the benefits of Poetry in your Python projects.